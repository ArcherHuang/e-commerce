{{> messages}}

<div class="main-wrapper">
  <header class="header-area transparent-bar sticky-bar showdow">
    <div class="main-header-wrap">
      <div class="container">
        <div class="row mt-40">
          <div class="col-xl-2 col-lg-2">
            <div class="logo mt-40">
              <h3>aja 後台</h3>
            </div>
          </div>
          <div class="col-xl-10 col-lg-10">
            <div class="main-menu menu-common-style menu-lh-1 menu-other-style">
              <nav>
                <ul>
                  <li><a href="/products/main"><b>MAIN</b> 主頁</a></li>
                  <li><a href="/admin/users"><b>Admin</b> Users</a></li>
                  <li><a href="/admin/categories"><b>Admin</b> Categories</a></li>
                  <li><a href="/admin/coupons"><b>Admin</b> Coupon</a></li>
                  <li><a href="/admin/products"><b>Admin</b> Product</a></li>
                  <li><a href="/admin/orders"><b>Admin</b> Order</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
</div>

<br />
<br />
<br />
<br />
<br />

<table class="table" id="myTable">
  <thead class="thead-dark">
    <tr>
      <th class="text-center" scope="col">#</th>
      <th class="text-center" scope="col">Order Name
      </th>
      <th class="text-center" scope="col">phone
      </th>
      <th class="text-center" scope="col">address
      </th>
      <th class="text-center" scope="col">sn
      </th>
      <th class="text-center" scope="col">totalAmount
      </th>
      <th class="text-center" scope="col">
        shippingStatus
      </th>
      <th class="text-center" scope="col">paymentStatus
      </th>
      <th class="text-center" scope="col">addDiscount
      </th>
      <th class="text-center" scope="col">dataStatus
      </th>
      <th class="text-center" scope="col">#</th>
    </tr>
  </thead>
  <tbody>
    {{#each orders}}
    <tr class="item">
      <th class="text-center" scope="row">{{this.id}}</th>
      <td class="text-center">{{this.name}}</td>
      <td class="text-center">{{this.phone}}</td>
      <td class="text-center">{{this.address}}</td>
      <td class="text-center">{{this.sn}}</td>
      <td class="text-center">{{this.totalAmount}}</td>
      <td class="text-center">

        {{!-- 待出貨 0, 出貨 1, 取消出貨 2 --}}
        {{#ifCond this.shippingStatus "1"}}
        出貨
        {{else}}
        {{#ifCond this.shippingStatus "2"}}
        取消出貨
        {{else}}
        待出貨
        {{/ifCond}}
        {{/ifCond}}

        <br />

        {{#ifCond this.shippingStatus "2"}}
        {{!-- 出貨 shippingStatus = 1 --}}
        <form action="/admin/orders/{{this.id}}/shipped?_method=PUT" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-outline-primary">出貨</button>
        </form>
        {{/ifCond}}

        {{#ifCond this.shippingStatus "1"}}
        {{!-- 取消出貨 shippingStatus = 2 --}}
        <form action="/admin/orders/{{this.id}}/unshipped?_method=PUT" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-outline-danger">取消出貨</button>
        </form>
        {{/ifCond}}

      </td>
      <td class="text-center">

        {{!-- 待付款 0, 已付款 1, 取消付款 2 --}}
        {{#ifCond this.paymentStatus 1}}
        已付款
        {{else}}
        {{#ifCond this.paymentStatus 2}}
        取消付款
        {{else}}
        待付款
        {{/ifCond}}
        {{/ifCond}}

      </td>
      <td class="text-center">{{this.addDiscount}}</td>
      <td class="text-center">
        {{!-- 訂單刪除 0, 訂單存在 1, 訂單取消 2 --}}
        {{#ifCond this.dataStatus 1}}
        訂單存在
        {{else}}
        {{#ifCond this.dataStatus 2}}
        訂單取消
        {{else}}
        訂單刪除
        {{/ifCond}}
        {{/ifCond}}

        <br />

        {{#ifCond this.dataStatus 1}}
        {{!-- 訂單取消 (dataStatus)：1 變 2 cancelOrder--}}
        <form action="/admin/orders/{{this.id}}/cancel?_method=PUT" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-outline-danger">訂單取消</button>
        </form>
        {{else}}
        {{#ifCond this.dataStatus 2}}
        {{!-- 訂單恢復(dataStatus)：2 變 1 resumeOrder--}}
        <form action="/admin/orders/{{this.id}}/resume?_method=PUT" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-outline-primary">訂單恢復</button>
        </form>
        {{/ifCond}}
        {{/ifCond}}

      </td>
      <td class="text-center">

      </td>
    </tr>
    {{/each}}
  </tbody>
</table>
<br />
<br />